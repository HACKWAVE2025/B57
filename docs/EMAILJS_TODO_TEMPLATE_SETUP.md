# EmailJS Todo Reminder Template Setup Guide

Complete step-by-step guide to set up the EmailJS template for todo reminders in the Super App.

## ğŸ“‹ Prerequisites

1. An EmailJS account ([sign up here](https://www.emailjs.com/))
2. A verified email service (Gmail, Outlook, etc.)
3. Your Super App environment variables configured

---

## ğŸ”§ Step 1: Create EmailJS Account & Service

### 1.1 Create Account
1. Go to [EmailJS](https://www.emailjs.com/)
2. Sign up for a free account
3. Verify your email address

### 1.2 Get Public Key
1. Go to **Account** â†’ **General** section
2. Copy your **Public Key** (you'll need this for environment variables)
3. Example: `xxxxxxxxxxxxx`

### 1.3 Create Email Service
1. Go to **Email Services** in the dashboard
2. Click **Add New Service**
3. Choose your email provider:
   - **Gmail** (recommended for testing)
   - **Outlook** 
   - **Other SMTP providers**
4. Follow the setup instructions:
   - For Gmail: Connect your Gmail account and authorize EmailJS
   - For Outlook: Connect your Microsoft account
5. **Save your Service ID** (looks like: `service_xxxxx`)
   - Example: `service_gmail123`

---

## ğŸ“§ Step 2: Create Email Template

### 2.1 Navigate to Templates
1. Go to **Email Templates** in EmailJS dashboard
2. Click **Create New Template**

### 2.2 Template Settings

#### **Template Name**
```
Todo Reminder Template
```

#### **Template Subject**
```
{{subject}}
```

**Note:** The subject will be automatically set by the app (e.g., "âœ¨ 3 overdue & 5 tasks today - You've got this!")

#### **Template Content (HTML)**

Choose ONE of the following templates:

---

### **Option A: Simple Template (Recommended)**

This template accepts the fully-formatted HTML from the app. The app handles all styling.

**Copy and paste this into the EmailJS template editor:**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f7;">
    {{{message_html}}}
</body>
</html>
```

**âœ… This is the simplest option - recommended for most users.**

---

### **Option B: Full Custom Template**

This template includes a custom wrapper around the app's HTML content. Use this if you want additional branding.

**Copy and paste this into the EmailJS template editor:**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #f4f4f7;">
    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f4f4f7; padding: 40px 20px;">
        <tr>
            <td align="center">
                <table role="presentation" width="600" cellpadding="0" cellspacing="0" border="0" style="max-width: 600px; background-color: #ffffff; border-radius: 12px; overflow: hidden;">
                    <tr>
                        <td style="padding: 30px;">
                            {{{message_html}}}
                        </td>
                    </tr>
                    <tr>
                        <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; text-align: center;">
                            <p style="color: #ffffff; font-size: 14px; margin: 0;">
                                Sent with â¤ï¸ from <strong>Super App</strong>
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
```

---

### 2.3 Email Settings (Template Configuration)

Configure these fields in the EmailJS template settings:

#### **To Email**
```
{{to_email}}
```
This is the recipient's email address.

#### **From Name**
```
Super App Todo Reminders
```
This appears as the sender name in the recipient's inbox.

#### **From Email**
```
Your verified email address
```
Use the same email you verified in your Email Service setup.

#### **Reply To**
```
{{reply_to}}
```
This sets the reply-to address (defaults to `noreply@super-app.com`).

#### **Subject**
```
{{subject}}
```
The subject line is automatically generated by the app based on task counts.

---

## ğŸ”‘ Step 3: Template Variables Reference

The Super App sends these variables to EmailJS:

### Required Variables

| Variable Name | Type | Description | Example |
|--------------|------|-------------|---------|
| `{{to_email}}` | String | Recipient's email address | `user@example.com` |
| `{{subject}}` | String | Email subject line | `âœ¨ 3 tasks for today - Let's make it happen!` |
| `{{{message_html}}}` | HTML | Complete HTML email content with all styling | Full HTML from the app |
| `{{message_text}}` | String | Plain text version (for fallback) | Plain text content |
| `{{reply_to}}` | String | Reply-to email address | `noreply@super-app.com` |
| `{{to_name}}` | String | Recipient's name (extracted from email) | `user` (from user@example.com) |

### Variable Usage in Template

- **`{{variable}}`** - Single braces for text variables
- **`{{{variable}}}`** - Triple braces for HTML content (prevents escaping)

**Important:** Use **`{{{message_html}}}`** (triple braces) to ensure the HTML is rendered correctly and not escaped.

---

## âš™ï¸ Step 4: Save Template & Get Template ID

1. **Save** the template in EmailJS dashboard
2. **Copy your Template ID** from the template page
   - Looks like: `template_xxxxx`
   - Example: `template_abc123`
3. You'll need this for the environment variables

---

## ğŸ” Step 5: Configure Environment Variables

Update your `.env` file in the project root with these variables:

```env
# EmailJS Configuration
VITE_EMAILJS_SERVICE_ID=your_service_id_here
VITE_EMAILJS_TEMPLATE_ID=your_general_template_id_here
VITE_EMAILJS_TODO_TEMPLATE_ID=your_todo_reminder_template_id_here
VITE_EMAILJS_PUBLIC_KEY=your_public_key_here
```

### Replace with your actual values:

```env
# Example (replace with your actual values)
VITE_EMAILJS_SERVICE_ID=service_gmail123
VITE_EMAILJS_TEMPLATE_ID=template_general456
VITE_EMAILJS_TODO_TEMPLATE_ID=template_oi33v6o
VITE_EMAILJS_PUBLIC_KEY=xxxxxxxxxxxxx
```

**ğŸ“Œ Your Template ID:** `template_oi33v6o`

### Where to find these values:

1. **VITE_EMAILJS_SERVICE_ID**: From **Email Services** â†’ Your service â†’ Service ID
2. **VITE_EMAILJS_TEMPLATE_ID**: (Optional) General template for other emails
3. **VITE_EMAILJS_TODO_TEMPLATE_ID**: From **Email Templates** â†’ Todo Reminder Template â†’ Template ID â­ **This is the one you need**
4. **VITE_EMAILJS_PUBLIC_KEY**: From **Account** â†’ **General** â†’ Public Key

---

## âœ… Step 6: Test the Template

### 6.1 Restart Your Development Server

After updating `.env`:
```bash
# Stop your dev server (Ctrl+C)
# Restart it
npm run dev
```

### 6.2 Test via EmailJS Dashboard

1. Go to your template in EmailJS
2. Click **Test** or **Send Test Email**
3. Use these test values:
   - `to_email`: Your email address
   - `subject`: `Test Todo Reminder`
   - `message_html`: `<p>This is a test email!</p>`
   - `reply_to`: `noreply@super-app.com`

### 6.3 Test via Super App

1. Log into your Super App
2. Go to **Tasks** page
3. Click the **ğŸ”” bell icon** to send a manual reminder
4. Check your email inbox (and spam folder)

---

## ğŸ“ Step 7: Template Configuration Checklist

Before testing, verify:

- [ ] EmailJS account created and verified
- [ ] Email Service created and connected
- [ ] Service ID copied and saved
- [ ] Email Template created with correct HTML
- [ ] Template ID copied and saved
- [ ] Public Key copied from Account section
- [ ] All environment variables set in `.env` file
- [ ] Development server restarted after `.env` changes
- [ ] At least one active (non-completed) todo exists
- [ ] User is logged in to the app
- [ ] Test email sent successfully

---

## ğŸ¨ Template Variable Details

### How Variables Are Generated

The Super App automatically generates these values when sending a reminder:

#### `subject` Generation Logic:
```typescript
// If there are overdue tasks:
"âœ¨ {overdueCount} overdue & {todayCount} tasks today - You've got this!"

// If no overdue tasks:
"ğŸŒŸ {todayCount} task(s) for today - Let's make it happen!"
```

#### `message_html` Generation:
The app generates a complete, premium HTML email with:
- Beautiful gradient headers
- Task statistics cards
- Task list with priority badges (ğŸ”¥ High, â­ Medium, âœ¨ Low)
- Motivational messages
- Inspirational quotes
- Call-to-action button
- Responsive design

#### `to_name` Extraction:
```typescript
to_name = to_email.split('@')[0]
// user@example.com â†’ "user"
```

---

## ğŸ” Troubleshooting

### Issue: Emails not sending

**Check:**
1. âœ… All environment variables are set correctly
2. âœ… Development server was restarted after `.env` changes
3. âœ… Service ID matches your Email Service
4. âœ… Template ID matches your Todo Reminder Template
5. âœ… Public Key is correct
6. âœ… Email Service is connected and verified

### Issue: Template variables not showing

**Check:**
1. âœ… Using exact variable names: `{{to_email}}`, `{{subject}}`, `{{{message_html}}}`
2. âœ… Using triple braces `{{{message_html}}}` for HTML content
3. âœ… Template saved in EmailJS dashboard
4. âœ… No typos in variable names

### Issue: HTML not rendering

**Check:**
1. âœ… Using `{{{message_html}}}` (triple braces) not `{{message_html}}`
2. âœ… Template HTML is valid
3. âœ… Email client supports HTML (most do)

### Issue: Can't find Template ID

**Steps:**
1. Go to **Email Templates** in EmailJS
2. Click on your **Todo Reminder Template**
3. The Template ID is shown at the top or in the URL
4. It looks like: `template_xxxxxxxxx`

---

## ğŸ“Š Template Structure Summary

```
EmailJS Template
â”œâ”€â”€ Subject: {{subject}}
â”œâ”€â”€ To Email: {{to_email}}
â”œâ”€â”€ From Name: Super App Todo Reminders
â”œâ”€â”€ Reply To: {{reply_to}}
â””â”€â”€ HTML Content: {{{message_html}}}
    â”œâ”€â”€ Generated by Super App
    â”œâ”€â”€ Includes all styling
    â”œâ”€â”€ Responsive design
    â””â”€â”€ Task list with priorities
```

---

## ğŸš€ Next Steps

After setup:

1. **Test the manual reminder button** in the Tasks page
2. **Wait for automatic reminder** at configured time (default: 9:00 AM)
3. **Check email logs** in browser console: `emailJSService.getEmailLog()`
4. **Customize reminder time** in `src/hooks/useTodoReminders.ts`

---

## ğŸ“š Additional Resources

- [EmailJS Documentation](https://www.emailjs.com/docs/)
- [EmailJS Template Guide](https://www.emailjs.com/docs/examples/reactjs/)
- [Super App Todo Reminder Setup Guide](./TODO_REMINDER_SETUP.md)

---

## âœ¨ Quick Reference Card

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         EmailJS Todo Template Setup - Quick Ref         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Template Variables:                                       â•‘
â•‘   â€¢ {{to_email}}        - Recipient email                â•‘
â•‘   â€¢ {{subject}}         - Email subject                  â•‘
â•‘   â€¢ {{{message_html}}}  - Full HTML content (triple)     â•‘
â•‘   â€¢ {{reply_to}}        - Reply address                  â•‘
â•‘                                                          â•‘
â•‘ Email Settings:                                          â•‘
â•‘   â€¢ To: {{to_email}}                                     â•‘
â•‘   â€¢ From Name: Super App Todo Reminders                â•‘
â•‘   â€¢ Subject: {{subject}}                                â•‘
â•‘   â€¢ Reply To: {{reply_to}}                               â•‘
â•‘                                                          â•‘
â•‘ Env Variables Needed:                                    â•‘
â•‘   â€¢ VITE_EMAILJS_SERVICE_ID                              â•‘
â•‘   â€¢ VITE_EMAILJS_TODO_TEMPLATE_ID                        â•‘
â•‘   â€¢ VITE_EMAILJS_PUBLIC_KEY                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

**Need help?** Check the browser console for error messages or review the email logs: `emailJSService.getEmailLog()`

